# 客户定养管理系统需求概述

## 建设目标
- 聚焦客户档案管理，支撑套餐项目的增减管理。
- 基于客户购买与取用记录动态调整套餐内容。
- 为管理员、配送员、客户提供一致的信息视图与操作体验。

## 用户角色
1. **管理员**：维护套餐、客户档案、分配任务。
2. **配送员**：查看配送任务、更新取用记录。
3. **客户**：通过小程序或公众号下单、查看套餐内容与消耗情况；首次使用需通过手机号绑定客户档案。

## 核心功能模块
### 客户档案管理
- 由管理员录入客户基础信息、联系记录、套餐订购历史。
- 客户编号按“五位数字”生成：万位固定为 2，千位为广安区城区自定义分区编码，百十个位按分区顺序递增。
- 支持录入 1-2 个手机号码、收货人姓名与详细地址；手机号同时作为小程序/公众号账户绑定依据。
- 记录客户首次购买时间及各套餐内容物的提取时间节点，便于回顾履约进度与生成后续配送计划。

### 套餐与库存联动
- 套餐内容模板管理，支持后续快速新增其他套餐组合。
- 根据客户取用记录增减套餐项并同步库存。
- 支持套餐消耗与库存预警提醒。
- 套餐模板需支持固定组合（如整只老母鸡 + 200 枚鸡蛋 + 配送礼包）与可选项的配置。

### 配送与执行
- 配送任务计划、状态跟踪。
- 配送员在执行任务时需登记取用明细：
  - 选择配送鸡蛋类型及数量（默认 30 枚，可调整）。
  - 指定鸡蛋包装：普通家庭装 30 枚、礼盒装 45 枚或散装（不限数量）。
  - 记录本次配送的蔬菜与厨房小礼品，可从预设选项选择或手动填写。
- 配送记录、客户确认。

### 数据分析
- 套餐执行情况统计。
- 客户活跃度与留存分析。
- 配送效率、库存周转率监控。

## 下一步行动建议
1. **细化数据结构**：梳理客户档案、套餐项目、配送记录需要保存的字段与来源。
2. **确认业务流程**：绘制管理员创建套餐、配送员执行、客户确认的操作流程图，确认每一步的状态变更与通知方式；补充每次配送所需扣减的库存（老母鸡、鸡蛋、有机蔬菜、厨房小礼品）。
3. **原型设计**：为三类角色分别设计界面草图，验证字段、按钮与操作顺序是否满足需求，尤其是套餐剩余数量与配送进度的展示方式。
4. **技术选型与接口规划**：初步确定前后端技术栈、部署方案，以及与现有系统（如支付、库存）的对接方式；规划导入现有 Excel 数据的流程。

## 现有套餐示例

| 套餐名称 | 基础内容 | 配送时附带 | 套餐总量 | 定养价格（元） | 备注 |
| --- | --- | --- | --- | --- | --- |
| 山野草鸡定养 | 1 只草鸡老母鸡 + 200 枚山野草鸡蛋 | 每次配送有机蔬菜 + 厨房小礼品 | 200 枚鸡蛋按次配送，老母鸡可一次或分批交付 | 466 | 需记录剩余鸡蛋数量与老母鸡交付状态 |
| 山野绿壳蛋鸡定养 | 1 只绿壳鸡老母鸡 + 200 枚山野草鸡蛋 | 每次配送有机蔬菜 + 厨房小礼品 | 200 枚鸡蛋按次配送，老母鸡可一次或分批交付 | 666 | 与草鸡套餐类似，价格不同；需区分老母鸡品类 |

> 注：上述表格可随业务扩展继续增加套餐，系统需支持自定义组合的录入与维护。

> 注：根据现有 Excel 表，需梳理鸡蛋、蔬菜、礼品等物资的库存编码与单位，以便系统自动核减。

## 待补充信息（可按表格补齐）

| 信息类型 | 关键字段示例 | 说明 |
| --- | --- | --- |
| 客户档案 | 客户编号（2xxxx 规则）、姓名、1-2 个手机号码、收货人姓名与地址、首次购买时间 | 明确客户基础数据与隐私字段保护方式 |
| 套餐提取记录 | 套餐项目、提取数量、提取时间、执行人/配送员 | 用于对照套餐履约进度，触发库存变动与后续提醒 |
| 套餐项目 | 项目编号、名称、包含内容、计量单位、价格 | 标注是否可拆分、是否需要库存绑定 |
| 取用记录 | 客户、套餐项目、数量、鸡蛋包装类型、蔬菜、厨房小礼品、时间、执行人 | 用于触发库存变动与状态更新；鸡蛋数量默认 30 枚，可按实际调整 |
| 配送任务 | 任务编号、关联客户/套餐、计划时间、配送员、状态 | 确认派单、执行、客户确认等环节 |
| 通知策略 | 触发事件、通知对象、渠道（短信/微信/邮件） | 便于后续配置提醒与消息推送 |

可根据实际情况继续扩展表格或新增栏目，以便团队成员快速补全需求信息。

## 非功能需求
- 角色权限控制（管理员、配送员、客户）。
- 可扩展以支持更多角色与模块。
- 数据安全与备份考虑。

